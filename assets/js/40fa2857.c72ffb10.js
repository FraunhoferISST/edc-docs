"use strict";(self.webpackChunkedc_docs=self.webpackChunkedc_docs||[]).push([[1133],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>d});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),l=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=l(e.components);return r.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),h=l(n),d=a,m=h["".concat(c,".").concat(d)]||h[d]||u[d]||o;return n?r.createElement(m,i(i({ref:t},p),{},{components:n})):r.createElement(m,i({ref:t},p))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=h;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var l=2;l<o;l++)i[l]=n[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},23957:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var r=n(87462),a=(n(67294),n(3905));const o={},i="Performance Tuning",s={unversionedId:"submodule/Connector/docs/developer/performance-tuning",id:"submodule/Connector/docs/developer/performance-tuning",title:"Performance Tuning",description:"Out of the box the EDC provides a set of default configurations that aim to find a good balance for performances.",source:"@site/docs/submodule/Connector/docs/developer/performance-tuning.md",sourceDirName:"submodule/Connector/docs/developer",slug:"/submodule/Connector/docs/developer/performance-tuning",permalink:"/edc-docs/docs/submodule/Connector/docs/developer/performance-tuning",draft:!1,editUrl:"https://github.com/FraunhoferISST/edc-docs/tree/master/docs/submodule/Connector/docs/developer/performance-tuning.md",tags:[],version:"current",frontMatter:{}},c={},l=[{value:"State Machines",id:"state-machines",level:2},{value:"Settings",id:"settings",level:3},{value:"How to tune them",id:"how-to-tune-them",level:3}],p={toc:l};function u(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"performance-tuning"},"Performance Tuning"),(0,a.kt)("p",null,"Out of the box the EDC provides a set of default configurations that aim to find a good balance for performances.\nThe extensibility nature of the EDC permits the user to configure it deeply."),(0,a.kt)("p",null,"Here will be showed how performance could be improved."),(0,a.kt)("h2",{id:"state-machines"},"State Machines"),(0,a.kt)("p",null,"At the core of the EDC there are different ",(0,a.kt)("a",{parentName:"p",href:"/edc-docs/docs/submodule/Connector/docs/developer/state-machine"},(0,a.kt)("inlineCode",{parentName:"a"},"State Machines")),", and their configuration is crucial to\nreach the best performances."),(0,a.kt)("h3",{id:"settings"},"Settings"),(0,a.kt)("p",null,"The most important settings for configuring a state machine are:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"iteration-wait"),": the time that the state machine will pass before fetching the next batch of entities to process in\nthe case in the last iteration there was no processing; Otherwise no wait is applied."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"batch-size"),": how many entities are fetched from the store for processing by the connector instance. The entities are\nlocked pessimistically against mutual access, so for the time of the processing no other connector\ninstances can read the same entities.")),(0,a.kt)("h3",{id:"how-to-tune-them"},"How to tune them"),(0,a.kt)("p",null,"In the control-plane there are 3 state machines:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"negotiation-consumer"),": the state machine that handles the contract negotiations from a consumer perspective"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"negotiation-provider"),": the state machine that handles the contract negotiations from a provider perspective"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"transfer-process"),": the state machine that handles the transfer processes")),(0,a.kt)("p",null,"For every state machine you can set the ",(0,a.kt)("inlineCode",{parentName:"p"},"iteration-wait")," (actually for the ",(0,a.kt)("inlineCode",{parentName:"p"},"negotiation-*")," there's a single setting\nused for both) and the ",(0,a.kt)("inlineCode",{parentName:"p"},"batch-size"),", so the settings (and their default value) are:"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"edc.negotiation.state-machine.iteration-wait-millis")," = 1000\n",(0,a.kt)("inlineCode",{parentName:"p"},"edc.negotiation.consumer.state-machine.batch-size")," = 20\n",(0,a.kt)("inlineCode",{parentName:"p"},"edc.negotiation.provider.state-machine.batch-size")," = 20\n",(0,a.kt)("inlineCode",{parentName:"p"},"edc.transfer.state-machine.iteration-wait-millis")," = 1000\n",(0,a.kt)("inlineCode",{parentName:"p"},"edc.transfer.state-machine.batch-size")," = 20"),(0,a.kt)("p",null,"Thus, by default all the control-plane state machines will have an iteration of 1 second if no\nentities are found/processed. There will be no wait but the next iteration will start as soon as all the entities are\nprocessed. At every iteration 20 entities are fetched."),(0,a.kt)("p",null,"Changing these values you could tune your connector, for example reducing the ",(0,a.kt)("inlineCode",{parentName:"p"},"iteration-wait")," will mean that the state\nmachine will be more reactive, and increasing the ",(0,a.kt)("inlineCode",{parentName:"p"},"batch-size")," will mean that more entities will be processed in the\nsame iteration. Please note increasing ",(0,a.kt)("inlineCode",{parentName:"p"},"batch-size")," too much could bring to longer processing time in the case that\nthere are a lot of different entities and that reducing ",(0,a.kt)("inlineCode",{parentName:"p"},"iteration-wait")," too much will make the state machine spend more\ntime in the fetch operation."),(0,a.kt)("p",null,"If tweaking the settings doesn't give you a performance boost, you can achieve them through horizontal scaling."))}u.isMDXComponent=!0}}]);