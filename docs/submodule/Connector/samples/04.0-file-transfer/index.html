<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-submodule/Connector/samples/04.0-file-transfer/README">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Perform a contract negotiation | My Site</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://FraunhoferISST.github.io/edc-docs/docs/submodule/Connector/samples/04.0-file-transfer/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Perform a contract negotiation | My Site"><meta data-rh="true" name="description" content="After successfully providing custom configuration properties to the EDC, we will perform a data transfer next: transmit"><meta data-rh="true" property="og:description" content="After successfully providing custom configuration properties to the EDC, we will perform a data transfer next: transmit"><link data-rh="true" rel="icon" href="/edc-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://FraunhoferISST.github.io/edc-docs/docs/submodule/Connector/samples/04.0-file-transfer/"><link data-rh="true" rel="alternate" href="https://FraunhoferISST.github.io/edc-docs/docs/submodule/Connector/samples/04.0-file-transfer/" hreflang="en"><link data-rh="true" rel="alternate" href="https://FraunhoferISST.github.io/edc-docs/docs/submodule/Connector/samples/04.0-file-transfer/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/edc-docs/blog/rss.xml" title="My Site RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/edc-docs/blog/atom.xml" title="My Site Atom Feed"><link rel="stylesheet" href="/edc-docs/assets/css/styles.99c6e2a1.css">
<link rel="preload" href="/edc-docs/assets/js/runtime~main.c2e953c9.js" as="script">
<link rel="preload" href="/edc-docs/assets/js/main.ee9e8729.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/edc-docs/"><div class="navbar__logo"><img src="/edc-docs/img/icon.png" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/edc-docs/img/icon.png" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/edc-docs/docs/">Docs</a><a class="navbar__item navbar__link" docid="README" href="/edc-docs/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/eclipse-edc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://search.maven.org/search?q=g:org.eclipse.edc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Maven Central<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://app.swaggerhub.com/search?owner=eclipse-edc-bot" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">SwaggerHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Perform a contract negotiation</h1><p>After successfully providing custom configuration properties to the EDC, we will perform a data transfer next: transmit
a test file from one connector to another connector. We want to keep things simple, so we will run both connectors on
the same physical machine (i.e. your development machine) and the file is transferred from one folder in the file system
to another folder. It is not difficult to imagine that instead of the local file system, the transfer happens between
more sophisticated storage locations, like a database or a cloud storage.</p><p>This is quite a big step up from the previous sample, where we ran only one connector. Those are the concrete tasks:</p><ul><li>Creating an additional connector, so that in the end we have two connectors, a consumer and a provider</li><li>Providing communication between provider and consumer using IDS multipart messages</li><li>Utilizing the management API to interact with the connector system</li><li>Performing a contract negotiation between provider and consumer</li><li>Performing a file transfer<ul><li>The consumer will initiate a file transfer</li><li>The provider will fulfill that request and copy a file to the desired location</li></ul></li></ul><p>Also, in order to keep things organized, the code in this example has been separated into several Java modules:</p><ul><li><code>[consumer|provider]</code>: contains the configuration and build files for both the consumer and the provider connector</li><li><code>transfer-file</code>: contains all the code necessary for the file transfer, integrated on provider side</li><li><code>status-checker</code>: contains the code for checking if the file has been transfer, integrated on the consumer side</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-file-transfer-extension">Create the file transfer extension<a class="hash-link" href="#create-the-file-transfer-extension" title="Direct link to heading">​</a></h2><p>The provider connector needs to transfer a file to the location specified by the consumer connector when the data is
requested. In order to offer any data, the provider must maintain an internal list of assets that are available for
transfer, the so-called &quot;catalog&quot;. For the sake of simplicity we use an in-memory catalog and pre-fill it with just one
single class. The provider also needs to create a contract offer for the asset, based on which a contract agreement can
be negotiated. For this, we also use an in-memory store and add a single contract definition that is valid for the
asset.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// in FileTransferExtension.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void initialize(ServiceExtensionContext context){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    var policy = createPolicy();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    policyStore.save(policy);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    registerDataEntries(context);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    registerContractDefinition(policy.getUid());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private void registerDataEntries(ServiceExtensionContext context) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    var assetPathSetting = context.getSetting(EDC_ASSET_PATH, &quot;/tmp/provider/test-document.txt&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    var assetPath = Path.of(assetPathSetting);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    var dataAddress = DataAddress.Builder.newInstance()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .property(&quot;type&quot;, &quot;File&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .property(&quot;path&quot;, assetPath.getParent().toString())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .property(&quot;filename&quot;, assetPath.getFileName().toString())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    var assetId = &quot;test-document&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    var asset = Asset.Builder.newInstance().id(assetId).build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    loader.accept(asset, dataAddress);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private void registerContractDefinition(String uid) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    var contractDefinition = ContractDefinition.Builder.newInstance()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .id(&quot;1&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .accessPolicyId(uid)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .contractPolicyId(uid)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .selectorExpression(AssetSelectorExpression.Builder.newInstance()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .whenEquals(Asset.PROPERTY_ID, &quot;test-document&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    contractStore.save(contractDefinition);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This adds an <code>Asset</code> to the <code>AssetIndex</code> and the relative <code>DataAddress</code> to the <code>DataAddressResolver</code>.
Or, in other words, your provider now &quot;hosts&quot; one file named <code>test-document.txt</code> located in the path
configured by the setting <code>edc.samples.04.asset.path</code> on your development machine. It makes it available for transfer
under its <code>id</code> <code>&quot;test-document&quot;</code>. While it makes sense to have some sort of similarity between file name and id, it
is by no means mandatory.</p><p>It also adds a <code>ContractDefinition</code> with <code>id</code> <code>1</code> and a previously created <code>Policy</code> (code omitted above), that poses no
restrictions on the data usage. The <code>ContractDefinition</code> also has an <code>AssetSelectorExpression</code> defining that it is
valid for all assets with the <code>id</code> <code>test-document</code>. Thus, it is valid for the created asset.</p><p>Next to offering the file, the provider also needs to be able to transfer the file. Therefore, the <code>transfer-file</code>
module also provides the code for copying the file to a specified location (code omitted here for brevity). It contains
the <a target="_blank" href="/edc-docs/assets/files/FileTransferDataSource-b3c7cee64b25409c0b1a72b7918b1960.java">FileTransferDataSource</a>
and the <a target="_blank" href="/edc-docs/assets/files/FileTransferDataSink-5d481ea2d3dcf14f78788933004e5f54.java">FileTransferDataSink</a>
as well as respective factories for both. The factories are registered with the <code>PipelineService</code> in the
<a target="_blank" href="/edc-docs/assets/files/FileTransferExtension-76807d5f712b43703abde7c2b0b18149.java">FileTransferExtension</a>,
thus making them available when a data request is processed.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-status-checker-extension">Create the status checker extension<a class="hash-link" href="#create-the-status-checker-extension" title="Direct link to heading">​</a></h2><p>The consumer needs to know when the file transfer has been completed. For doing that, in the extension
we are going to implement a custom <code>StatusChecker</code> that will be registered with the <code>StatusCheckerRegistry</code> in the
<a target="_blank" href="/edc-docs/assets/files/SampleStatusCheckerExtension-0f82c548abdaf5e821dd05bbbfd045d7.java">SampleStatusCheckerExtension</a>
The custom status checker will handle the check for the destination type <code>File</code> and it will check that the path
specified in the data requests exists. The code is available in the
class <a target="_blank" href="/edc-docs/assets/files/SampleFileStatusChecker-09f01a429854b9ccb7d1d9f3da15971b.java">SampleFileStatusChecker</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-connectors">Create the connectors<a class="hash-link" href="#create-the-connectors" title="Direct link to heading">​</a></h2><p>After creating the required extensions, we next need to create the two connectors. For both of them we need a gradle
build file and a config file. Common dependencies we need to add to the build files on both sides are the following:</p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// in consumer/build.gradle.kts and provider/build.gradle.kts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">implementation(project(&quot;:extensions:common:configuration:configuration-filesystem&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">implementation(project(&quot;:data-protocols:ids&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">implementation(project(&quot;:extensions:common:iam:iam-mock&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">implementation(project(&quot;:extensions:control-plane:api:management-api&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">implementation(project(&quot;:extensions:common:auth:auth-tokenbased&quot;))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Three of these dependencies are new and have not been used in the previous samples:</p><ol><li><code>data-protocols:ids</code>: contains all IDS modules and therefore enables IDS Multipart communication with other connectors</li><li><code>extensions:iam:iam-mock</code>: provides a no-op identity provider, which does not require certificates and performs no checks</li><li><code>extensions:api:auth-tokenbased</code>: adds authentication for management API endpoints</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="provider-connector">Provider connector<a class="hash-link" href="#provider-connector" title="Direct link to heading">​</a></h3><p>As the provider connector is the one performing the file transfer after the file has been requested by the consumer, it
needs the <code>transfer-file</code> extension provided in this sample.</p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">implementation(project(&quot;:samples:04.0-file-transfer:transfer-file&quot;))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We also need to adjust the provider&#x27;s <code>config.properties</code>. The property <code>edc.samples.04.asset.path</code> should point to an
existing file in our local environment, as this is the file that will be transferred. We also configure a separate API
context for the management API, like we learned in previous chapter. Then we add the property
<code>ids.webhook.address</code>, which should point to our provider connector&#x27;s IDS address. This is used as the callback
address during the contract negotiation. Since the IDS API is running on a different port (default is <code>8282</code>), we set
the webhook address to <code>http://localhost:8282</code> accordingly.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="consumer-connector">Consumer connector<a class="hash-link" href="#consumer-connector" title="Direct link to heading">​</a></h3><p>The consumer is the one &quot;requesting&quot; the data and providing a destination for it, i.e. a directory into which the
provider can copy the requested file.</p><p>We configure the consumer&#x27;s API ports in <code>consumer/config.properties</code>, so that it does not use the same ports as the
provider. In the config file, we also need to configure the API key authentication, as we&#x27;re going to use
endpoints from the EDC&#x27;s management API in this sample and integrated the extension for token-based API
authentication. Therefore, we add the property <code>edc.api.auth.key</code> and set it to e.g. <code>password</code>. And last, we also need
to configure the consumer&#x27;s webhook address. We expose the IDS API endpoints on a different port and path than other
endpoints, so the property <code>ids.webhook.address</code> is adjusted to match the IDS API port.</p><p>The consumer connector also needs the <code>status-checker</code> extension for marking the transfer as completed on the consumer
side.</p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">implementation(project(&quot;:samples:04.0-file-transfer:status-checker&quot;))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="run-the-sample">Run the sample<a class="hash-link" href="#run-the-sample" title="Direct link to heading">​</a></h2><p>Running this sample consists of multiple steps, that are executed one by one.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-build-and-start-the-connectors">1. Build and start the connectors<a class="hash-link" href="#1-build-and-start-the-connectors" title="Direct link to heading">​</a></h3><p>The first step to running this sample is building and starting both the provider and the consumer connector. This is
done the same way as in the previous samples.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./gradlew samples:04.0-file-transfer:consumer:build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">java -Dedc.fs.config</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">samples/04.0-file-transfer/consumer/config.properties -jar samples/04.0-file-transfer/consumer/build/libs/consumer.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># in another terminal window:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./gradlew samples:04.0-file-transfer:provider:build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">java -Dedc.fs.config</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">samples/04.0-file-transfer/provider/config.properties -jar samples/04.0-file-transfer/provider/build/libs/provider.jar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Assuming you didn&#x27;t change the ports in config files, the consumer will listen on the ports <code>9191</code>, <code>9192</code>
(management API) and <code>9292</code> (IDS API) and the provider will listen on the ports <code>8181</code>, <code>8182</code>
(management API) and <code>8282</code> (IDS API).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-initiate-a-contract-negotiation">2. Initiate a contract negotiation<a class="hash-link" href="#2-initiate-a-contract-negotiation" title="Direct link to heading">​</a></h3><p>In order to request any data, a contract agreement has to be negotiated between provider and consumer. The provider
offers all of their assets in the form of contract offers, which are the basis for such a negotiation. In the
<code>transfer-file</code> extension, we&#x27;ve added a contract definition (from which contract offers can be created) for the
file, but the consumer has yet to accept this offer.</p><p>The consumer now needs to initiate a contract negotiation sequence with the provider. That sequence looks as follows:</p><ol><li>Consumer sends a contract offer to the provider (<strong>currently, this has to be equal to the provider&#x27;s offer!</strong>)</li><li>Provider validates the received offer against its own offer</li><li>Provider either sends an agreement or a rejection, depending on the validation result</li><li>In case of successful validation, provider and consumer store the received agreement for later reference</li></ol><p>Of course, this is the simplest possible negotiation sequence. Later on, both connectors can also send counter offers in
addition to just confirming or declining an offer.</p><p>In order to trigger the negotiation, we use a management API endpoint. We set our contract offer in the request
body. The contract offer is prepared in <a target="_blank" href="/edc-docs/assets/files/contractoffer-91a92f36f73863fc4b8bb5b4af1084c2.json">contractoffer.json</a> and can be used as is. In a real
scenario, a potential consumer would first need to request a description of the provider&#x27;s offers in order to get the
provider&#x27;s contract offer.</p><blockquote><p>Note, that we need to specify the <code>X-Api-Key</code> header, as we integrated token-based API authentication. The value
of the header has to match the value of the <code>edc.api.auth.key</code> property in the consumer&#x27;s <code>config.properties</code>.</p></blockquote><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -X POST -H </span><span class="token string" style="color:#e3116c">&quot;Content-Type: application/json&quot;</span><span class="token plain"> -H </span><span class="token string" style="color:#e3116c">&quot;X-Api-Key: password&quot;</span><span class="token plain"> -d @samples/04.0-file-transfer/contractoffer.json </span><span class="token string" style="color:#e3116c">&quot;http://localhost:9192/api/v1/management/contractnegotiations&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the response we&#x27;ll get a UUID that we can use to get the contract agreement negotiated between provider and consumer.</p><p>Sample output:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;5a6b7e22-dc7d-4135-bc98-4cc5fd1dd1ed&quot;</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-look-up-the-contract-agreement-id">3. Look up the contract agreement ID<a class="hash-link" href="#3-look-up-the-contract-agreement-id" title="Direct link to heading">​</a></h3><p>After calling the endpoint for initiating a contract negotiation, we get a UUID as the response. This UUID is the ID of
the ongoing contract negotiation between consumer and provider. The negotiation sequence between provider and consumer
is executed asynchronously in the background by a state machine. Once both provider and consumer either reach the
<code>confirmed</code> or the  <code>declined</code> state, the negotiation is finished. We can now use the UUID to check the current status
of the negotiation using an endpoint on the consumer side. Again, we use the <code>X-Api-Key</code> header with the same value
that&#x27;s set in our consumer&#x27;s <code>config.properties</code>.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -X GET -H </span><span class="token string" style="color:#e3116c">&#x27;X-Api-Key: password&#x27;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http://localhost:9192/api/v1/management/contractnegotiations/{UUID}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will return information about the negotiation, which contains e.g. the current state of the negotiation and, if the
negotiation has been completed successfully, the ID of a contract agreement. We can now use this agreement to request
the file. So we copy and store the agreement ID for the next step.</p><p>Sample output:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;contractAgreementId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;1:45d5b9d2-97b6-4073-8e11-e0e0f44a3538&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;state&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;CONFIRMED&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you see an output similar to the following, the negotiation has not yet been completed. In this case,
just wait for a moment and call the endpoint again.</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;state&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;REQUESTED&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;contractAgreementId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-request-the-file">4. Request the file<a class="hash-link" href="#4-request-the-file" title="Direct link to heading">​</a></h3><p>Now that we have a contract agreement, we can finally request the file. In the request body we need to specify
which asset we want transferred, the ID of the contract agreement, the address of the provider connector and where
we want the file transferred. The request body is prepared in <a target="_blank" href="/edc-docs/assets/files/filetransfer-b21a53045792db637f182292739310a4.json">filetransfer.json</a>. Before executing
the request, insert the contract agreement ID from the previous step and adjust the destination location for the file
transfer. Then run:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -X POST -H </span><span class="token string" style="color:#e3116c">&quot;Content-Type: application/json&quot;</span><span class="token plain"> -H </span><span class="token string" style="color:#e3116c">&quot;X-Api-Key: password&quot;</span><span class="token plain"> -d @samples/04.0-file-transfer/filetransfer.json </span><span class="token string" style="color:#e3116c">&quot;http://localhost:9192/api/v1/management/transferprocess&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Again, we will get a UUID in the response. This time, this is the ID of the <code>TransferProcess</code> created on the consumer
side, because like the contract negotiation, the data transfer is handled in a state machine and performed asynchronously.</p><p>Sample output:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;deeed974-8a43-4fd5-93ad-e1b8c26bfa44&quot;</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Since transferring a file does not require any resource provisioning on either side, the transfer will be very quick and
most likely already done by the time you read the UUID.</p><hr><p>You can also check the logs of the connectors to see that the transfer has been completed:</p><p>Consumer side:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">DEBUG </span><span class="token number" style="color:#36acaa">2022</span><span class="token plain">-05-03T10:37:59.599642754 Starting transfer </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> asset asset-id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DEBUG </span><span class="token number" style="color:#36acaa">2022</span><span class="token plain">-05-03T10:37:59.6071347 Transfer process initialised f925131b-d61e-48b9-aa15-0f5e2e749064</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DEBUG </span><span class="token number" style="color:#36acaa">2022</span><span class="token plain">-05-03T10:38:01.230902645 TransferProcessManager: Sending process f925131b-d61e-48b9-aa15-0f5e2e749064 request to http://localhost:8282/api/v1/ids/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DEBUG </span><span class="token number" style="color:#36acaa">2022</span><span class="token plain">-05-03T10:38:01.260916372 Response received from connector. Status </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DEBUG </span><span class="token number" style="color:#36acaa">2022</span><span class="token plain">-05-03T10:38:01.285641788 TransferProcessManager: Process f925131b-d61e-48b9-aa15-0f5e2e749064 is now REQUESTED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DEBUG </span><span class="token number" style="color:#36acaa">2022</span><span class="token plain">-05-03T10:38:06.246094874 Process f925131b-d61e-48b9-aa15-0f5e2e749064 is now IN_PROGRESS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DEBUG </span><span class="token number" style="color:#36acaa">2022</span><span class="token plain">-05-03T10:38:06.246755642 Process f925131b-d61e-48b9-aa15-0f5e2e749064 is now COMPLETED</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-see-transferred-file">5. See transferred file<a class="hash-link" href="#5-see-transferred-file" title="Direct link to heading">​</a></h3><p>After the file transfer is completed, we can check the destination path specified in the request for the file. Here,
we&#x27;ll now find a file with the same content as the original file offered by the provider.</p><hr><p><a href="/edc-docs/docs/submodule/Connector/samples/configuration/">Previous Chapter</a> | <a href="/edc-docs/docs/submodule/Connector/samples/04.1-file-transfer-listener/">Next Chapter</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/FraunhoferISST/edc-docs/tree/master/docs/submodule/Connector/samples/04.0-file-transfer/README.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#create-the-file-transfer-extension" class="table-of-contents__link toc-highlight">Create the file transfer extension</a></li><li><a href="#create-the-status-checker-extension" class="table-of-contents__link toc-highlight">Create the status checker extension</a></li><li><a href="#create-the-connectors" class="table-of-contents__link toc-highlight">Create the connectors</a><ul><li><a href="#provider-connector" class="table-of-contents__link toc-highlight">Provider connector</a></li><li><a href="#consumer-connector" class="table-of-contents__link toc-highlight">Consumer connector</a></li></ul></li><li><a href="#run-the-sample" class="table-of-contents__link toc-highlight">Run the sample</a><ul><li><a href="#1-build-and-start-the-connectors" class="table-of-contents__link toc-highlight">1. Build and start the connectors</a></li><li><a href="#2-initiate-a-contract-negotiation" class="table-of-contents__link toc-highlight">2. Initiate a contract negotiation</a></li><li><a href="#3-look-up-the-contract-agreement-id" class="table-of-contents__link toc-highlight">3. Look up the contract agreement ID</a></li><li><a href="#4-request-the-file" class="table-of-contents__link toc-highlight">4. Request the file</a></li><li><a href="#5-see-transferred-file" class="table-of-contents__link toc-highlight">5. See transferred file</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a href="https://projects.eclipse.org/projects/technology.edc/contact" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><span class="footer__link-separator">·</span><a href="https://www.youtube.com/channel/UCYmjEHtMSzycheBB4AeITHg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><span class="footer__link-separator">·</span><a href="https://projects.eclipse.org/projects/technology.edc" target="_blank" rel="noopener noreferrer" class="footer__link-item">EF Project<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Eclipse Dataspace Components, built with Docusaurus.</div></div></div></footer></div>
<script src="/edc-docs/assets/js/runtime~main.c2e953c9.js"></script>
<script src="/edc-docs/assets/js/main.ee9e8729.js"></script>
</body>
</html>