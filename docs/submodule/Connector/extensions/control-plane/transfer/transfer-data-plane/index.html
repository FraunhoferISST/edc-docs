<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-submodule/Connector/extensions/control-plane/transfer/transfer-data-plane/README">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Transfer Data Plane | My Site</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://FraunhoferISST.github.io/edc-docs/docs/submodule/Connector/extensions/control-plane/transfer/transfer-data-plane/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Transfer Data Plane | My Site"><meta data-rh="true" name="description" content="This extension provides services for delegating data transfer to the Data Plane. Especially two types of data transfers are supported:"><meta data-rh="true" property="og:description" content="This extension provides services for delegating data transfer to the Data Plane. Especially two types of data transfers are supported:"><link data-rh="true" rel="icon" href="/edc-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://FraunhoferISST.github.io/edc-docs/docs/submodule/Connector/extensions/control-plane/transfer/transfer-data-plane/"><link data-rh="true" rel="alternate" href="https://FraunhoferISST.github.io/edc-docs/docs/submodule/Connector/extensions/control-plane/transfer/transfer-data-plane/" hreflang="en"><link data-rh="true" rel="alternate" href="https://FraunhoferISST.github.io/edc-docs/docs/submodule/Connector/extensions/control-plane/transfer/transfer-data-plane/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/edc-docs/blog/rss.xml" title="My Site RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/edc-docs/blog/atom.xml" title="My Site Atom Feed"><link rel="stylesheet" href="/edc-docs/assets/css/styles.99c6e2a1.css">
<link rel="preload" href="/edc-docs/assets/js/runtime~main.c2e953c9.js" as="script">
<link rel="preload" href="/edc-docs/assets/js/main.ee9e8729.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/edc-docs/"><div class="navbar__logo"><img src="/edc-docs/img/icon.png" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/edc-docs/img/icon.png" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/edc-docs/docs/">Docs</a><a class="navbar__item navbar__link" docid="README" href="/edc-docs/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/eclipse-edc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://search.maven.org/search?q=g:org.eclipse.edc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Maven Central<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://app.swaggerhub.com/search?owner=eclipse-edc-bot" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">SwaggerHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Transfer Data Plane</h1><p>This extension provides services for delegating data transfer to the Data Plane. Especially two types of data transfers are supported:</p><ul><li>Consumer Pull: data consumer pulls actively the data by hitting an endpoint exposed by the provider. This use-case is typically
used in cases where the data provider wants to use its Data Plane as a http proxy to an internal backend API which serves data.</li><li>Provider Push: if data request is successfully processed, then the provider pushes data from its data source to the provider.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="background">Background<a class="hash-link" href="#background" title="Direct link to heading">​</a></h2><p>The Data Plane is the component performing the actual data exchange between the provider and the consumer. Once an agreement
is established between the consumer and the provider, then the consumer can trigger the data request that will initiate the data exchange.
When at this stage, the present extension is used for delegating the data transfer to the appropriate Data Plane instance.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="scope">Scope<a class="hash-link" href="#scope" title="Direct link to heading">​</a></h3><p>This extension is to be used for every data transfer use-case relying on the EDC data plane.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-cases">Use Cases<a class="hash-link" href="#use-cases" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="consumer-pull">Consumer pull<a class="hash-link" href="#consumer-pull" title="Direct link to heading">​</a></h4><p>Let us consider that a data provider wants to expose a REST API serving flight schedule data. This REST API takes in input
a set of query parameters which enables to restrict the amount of data returned in the response, e.g. departure date, boarding airport...
A consumer of this API will potentially be interested in hitting this API several times, potentially with different parameters, depending
on how the consumer backend application are exploiting the data.</p><p>For this use-case, the Provider Push data transfer type would not be relevant, as it would require to establish a new contract before
the consumer send a new http request, which would potentially overload the Control Plane. The Consumer Pull data transfer comes handy in that case.</p><p>To trigger this data transfer type, the destination type of the <code>DataRequest</code> must be set to <code>HttpProxy</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="provider-push">Provider push<a class="hash-link" href="#provider-push" title="Direct link to heading">​</a></h4><p>A consumer wants to perform a one-time transfer of a large amount of data stored in a S3 bucket on provider side, and
put these data into its Azure Blob Storage.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="technical-details">Technical Details<a class="hash-link" href="#technical-details" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="interfaces">Interfaces<a class="hash-link" href="#interfaces" title="Direct link to heading">​</a></h3><p>This extension introduces a Control Plane endpoint used by the Data Plane for validating the access token received in input
of its public API. OpenApi documentation can be found <a href="/edc-docs/docs/submodule/Connector/resources/openapi/yaml/transfer-data-plane.yaml">here</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configurations">Configurations<a class="hash-link" href="#configurations" title="Direct link to heading">​</a></h3><table><thead><tr><th align="left">Parameter name</th><th align="left">Description</th><th align="left">Mandatory</th><th align="left">Default value</th></tr></thead><tbody><tr><td align="left"><code>edc.transfer.proxy.token.validity.seconds</code></td><td align="left">Validity (in seconds) of tokens generated by the extension for accessing Data Plane public API</td><td align="left">false</td><td align="left">600</td></tr><tr><td align="left"><code>edc.transfer.client.selector.strategy</code></td><td align="left">Strategy for Data Plane instance selection</td><td align="left">false</td><td align="left">random</td></tr><tr><td align="left"><code>edc.transfer.proxy.token.signer.privatekey.alias</code></td><td align="left">Alias of private key used for signing tokens</td><td align="left">false</td><td align="left">Random EC public key</td></tr><tr><td align="left"><code>edc.transfer.proxy.token.verifier.publickey.alias</code></td><td align="left">Alias of public key used for verifying the tokens</td><td align="left">false</td><td align="left">Random EC private key</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="terminology">Terminology<a class="hash-link" href="#terminology" title="Direct link to heading">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="design-principles">Design Principles<a class="hash-link" href="#design-principles" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="consumer-pull-1">Consumer pull<a class="hash-link" href="#consumer-pull-1" title="Direct link to heading">​</a></h3><p><img loading="lazy" alt="alt text" src="/edc-docs/assets/images/transfer-data-plane-consumer-pull-c73a193decd9cd47851da088876d5b35.png" width="1501" height="1071" class="img_ev3q"></p><ol start="0"><li>Provider and consumer agree to a contract (not displayed in the diagram)</li><li>Consumer initiates the transfer process, i.e. sends <code>DataRequest</code> with destination type equals to <code>HttpProxy</code></li><li>Provider Control Plane asks to the selector which Data Plane instance can be used for this data transfer</li><li>Selector returns an eligible Data Plane instance (if any)</li><li>Provider Control Plane generates an <code>EndpointDataReference</code> with a signed token composed of:<ul><li>a <code>dad</code> claim containing the encrypted <code>DataAddress</code> of the actual data source (provider ecosystem)</li><li>a <code>cid</code> claim containing the contract id</li></ul></li><li><code>EndpointDataReference</code> is sent to the consumer Control Plane (IDS protocol)</li><li>Consumer Control Plane asks to the selector which Data Plane instance can be used for this data transfer</li><li>Selector returns an eligible Data Plane instance (if any)</li><li>Transform the <code>EndpointDataReference</code> into another with a signed token composed of:<ul><li>a <code>dad</code> claim containing the encrypted <code>DataAddress</code> to the Provider Data Plane, i.e. a <code>HttpDataAddress</code> whose url is the public API of the Provider Data Plane.</li><li>a <code>cid</code> claim containing the contract id</li></ul></li><li>Dispatch the resulting <code>EndpointDataReference</code> to the appropriate backend services (consumer ecosystem), see <code>EndpointDataReferenceReceiver</code></li><li>Consumer backend services hit the Consumer Data Plane public API with any verb (GET, POST, DELETE...) and pass the token of the <code>EndpointDataReference</code> as input</li><li>Consumer Data Plane sends the token to its Control Plane for validation</li><li>Consumer Control Plane validates the token, check if contract is still valid and, if yes, decrypt the <code>DataAddress</code></li><li>Consumer Control Plane returns the decrypted data address to the Data Plane</li><li>Consumer Data Plane forwards the data request to the Provider Data Plane public API</li><li>Consumer Data Plane sends the token to its Control Plane for validation</li><li>Provider Control Plane validates the token, check if contract is still valid and, if yes, decrypt the <code>DataAddress</code></li><li>Provider Control Plane returns the decrypted data address to the Data Plane</li><li>Provider Data Plane forward data request to the backend services</li><li>Backend services return data to Provider Data Plane</li><li>Provider Data Plane returns data to Consumer Data Plane</li><li>Consumer Data Plane returns data to the Consumer backend services</li></ol><blockquote><p><strong><em>NOTE:</em></strong>  For a Data Plane instance to be eligible for the transfer, it must:</p><ul><li>contains <code>HttpProxy</code> in the <code>allowedDestTypes</code></li><li>contain a <code>property</code> which key <code>publicApiUrl</code>, which contains the actual URL of the Data Plane public API.</li></ul></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="provider-push-1">Provider push<a class="hash-link" href="#provider-push-1" title="Direct link to heading">​</a></h3><p><img loading="lazy" alt="alt text" src="/edc-docs/assets/images/transfer-data-plane-provider-push-034ef24f33ecff2d7e711c1a17d18f9a.png" width="1251" height="489" class="img_ev3q"></p><ol start="0"><li>Provider and consumer agree to a contract (not displayed in the diagram)</li><li>Consumer initiates the transfer process, i.e. sends <code>DataRequest</code> with any destination type other than <code>HttpProxy</code></li><li>Provider Control Plane retrieves the <code>DataAddress</code> of the actual data source and creates a <code>DataFlowRequest</code> based on the received <code>DataRequest</code> and this data address</li><li>Provider Control Plane asks to the selector which Data Plane instance can be used for this data transfer</li><li>Selector returns an eligible Data Plane instance (if any)</li><li>Provider Control Plane sends the <code>DataFlowRequest</code> to the selected Data Plane instance through its control API (see <code>DataPlaneControlApi</code>)</li><li>Provider Data Plane validates the incoming request</li><li>If request is valid, Provider Data Plane returns acknowledgement</li><li><code>DataPlaneManager</code> of the Provider Data Plane processes the request: it creates a <code>DataSource</code>/<code>DataSink</code> pair based on the source/destination data addresses</li><li>Provider Data Plane fetches data from the actual data source (see <code>DataSource</code>)</li><li>Provider Data Plane pushes data to the consumer services (see <code>DataSink</code>)</li></ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/FraunhoferISST/edc-docs/tree/master/docs/submodule/Connector/extensions/control-plane/transfer/transfer-data-plane/README.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#background" class="table-of-contents__link toc-highlight">Background</a><ul><li><a href="#scope" class="table-of-contents__link toc-highlight">Scope</a></li><li><a href="#use-cases" class="table-of-contents__link toc-highlight">Use Cases</a></li></ul></li><li><a href="#technical-details" class="table-of-contents__link toc-highlight">Technical Details</a><ul><li><a href="#interfaces" class="table-of-contents__link toc-highlight">Interfaces</a></li><li><a href="#configurations" class="table-of-contents__link toc-highlight">Configurations</a></li></ul></li><li><a href="#terminology" class="table-of-contents__link toc-highlight">Terminology</a></li><li><a href="#design-principles" class="table-of-contents__link toc-highlight">Design Principles</a><ul><li><a href="#consumer-pull-1" class="table-of-contents__link toc-highlight">Consumer pull</a></li><li><a href="#provider-push-1" class="table-of-contents__link toc-highlight">Provider push</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a href="https://projects.eclipse.org/projects/technology.edc/contact" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><span class="footer__link-separator">·</span><a href="https://www.youtube.com/channel/UCYmjEHtMSzycheBB4AeITHg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><span class="footer__link-separator">·</span><a href="https://projects.eclipse.org/projects/technology.edc" target="_blank" rel="noopener noreferrer" class="footer__link-item">EF Project<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Eclipse Dataspace Components, built with Docusaurus.</div></div></div></footer></div>
<script src="/edc-docs/assets/js/runtime~main.c2e953c9.js"></script>
<script src="/edc-docs/assets/js/main.ee9e8729.js"></script>
</body>
</html>