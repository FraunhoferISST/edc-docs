function lease(e,o,t){var n=getContext(),l=n.getCollection(),a=l.getSelfLink(),r=n.getResponse(),s={query:"SELECT * FROM t WHERE t.wrappedInstance.id = @objectId",parameters:[{name:"@objectId",value:e}]},c=l.queryDocuments(a,s,{},(function(e,n,a){if(e)throw new Error("Error"+e.message);if(!n||!n.length){let e="No documents found!";return r.setBody(e),void console.log(e)}if(n.length>1){let e="too many docs found for query: expected 1, got "+n.length;throw console.log(e),e}let s=n[0];if(null!=s.lease&&s.lease.leasedBy!==o)throw"Document is locked by another connector";t?function(e,o){e.lease={leasedBy:o,leasedAt:Date.now(),leaseDuration:6e4};var t=l.replaceDocument(e._self,e,(function(e,o){if(e)throw"Unable to update Document, abort "}));if(!t)throw"Unable to update Document, abort";console.log("updated lease of document "+e.id)}(s,o):s.lease=null,r.setBody(s)}));if(!c)throw"Unable to read document details, abort "}