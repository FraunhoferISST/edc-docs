"use strict";(self.webpackChunkedc_docs=self.webpackChunkedc_docs||[]).push([[9912],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>y});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=r.createContext({}),c=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},d=function(e){var n=c(e.components);return r.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},u=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=c(t),y=o,m=u["".concat(s,".").concat(y)]||u[y]||p[y]||i;return t?r.createElement(m,a(a({ref:n},d),{},{components:t})):r.createElement(m,a({ref:n},d))}));function y(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=t.length,a=new Array(i);a[0]=u;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,a[1]=l;for(var c=2;c<i;c++)a[c]=t[c];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},9676:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var r=t(7462),o=(t(7294),t(3905));const i={},a="Dependency analysis",l={unversionedId:"submodule/Connector/docs/developer/decision-records/2022-03-14-dependency-analysis/README",id:"submodule/Connector/docs/developer/decision-records/2022-03-14-dependency-analysis/README",title:"Dependency analysis",description:"Decision",source:"@site/docs/submodule/Connector/docs/developer/decision-records/2022-03-14-dependency-analysis/README.md",sourceDirName:"submodule/Connector/docs/developer/decision-records/2022-03-14-dependency-analysis",slug:"/submodule/Connector/docs/developer/decision-records/2022-03-14-dependency-analysis/",permalink:"/edc-docs/docs/submodule/Connector/docs/developer/decision-records/2022-03-14-dependency-analysis/",draft:!1,editUrl:"https://github.com/FraunhoferISST/edc-docs/tree/master/docs/submodule/Connector/docs/developer/decision-records/2022-03-14-dependency-analysis/README.md",tags:[],version:"current",frontMatter:{}},s={},c=[{value:"Decision",id:"decision",level:2},{value:"Rationale",id:"rationale",level:2}],d={toc:c};function p(e){let{components:n,...t}=e;return(0,o.kt)("wrapper",(0,r.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"dependency-analysis"},"Dependency analysis"),(0,o.kt)("h2",{id:"decision"},"Decision"),(0,o.kt)("p",null,"The CI workflow is extended with two Gradle tasks for analyzing EDC module dependencies:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"The ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/autonomousapps/dependency-analysis-android-gradle-plugin"},"Dependency Analysis Gradle Plugin")," is used for detecting unused dependencies and dependencies declared on the wrong configuration (",(0,o.kt)("inlineCode",{parentName:"li"},"api")," vs ",(0,o.kt)("inlineCode",{parentName:"li"},"implementation")," vs ",(0,o.kt)("inlineCode",{parentName:"li"},"compileOnly"),", etc.)."),(0,o.kt)("li",{parentName:"ul"},"A custom plugin defines rules on which module dependencies are allowed within EDC (e.g. no module may depend directly on any of the core modules).")),(0,o.kt)("p",null,"The tasks are initially set to only emit warnings, but will be configured to fail builds once all warnings have been resolved."),(0,o.kt)("p",null,"The tasks are run in the CI workflow."),(0,o.kt)("h2",{id:"rationale"},"Rationale"),(0,o.kt)("p",null,"The ",(0,o.kt)("a",{parentName:"p",href:"https://docs.gradle.org/current/userguide/java_library_plugin.html#sec:java_library_recognizing_dependencies"},"Gradle Java library plugin")," defines a clear separation between configurations. This allows controlling and limiting the use of transitive dependencies."),(0,o.kt)("p",null,"The Java library plugin introduces the concept of ABI (Application Binary Interface) which includes (among others) types used in public methods. Dependencies that define those types should be defined in the ",(0,o.kt)("inlineCode",{parentName:"p"},"api")," configuration. Other dependencies should be defined in the ",(0,o.kt)("inlineCode",{parentName:"p"},"implementation")," configuration so that they are not transitively exposed, and therefore do not leak into the consumers' compile classpath."),(0,o.kt)("p",null,"The Dependency Analysis Gradle Plugin analyzes the abstract syntax tree to determine the ABI. On that basis, it can recommend which import configurations should be changed."))}p.isMDXComponent=!0}}]);