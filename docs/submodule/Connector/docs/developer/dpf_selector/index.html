<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-submodule/Connector/docs/developer/dpf_selector">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Technical concept DPF Selector | My Site</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://FraunhoferISST.github.io/edc-docs/docs/submodule/Connector/docs/developer/dpf_selector"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Technical concept DPF Selector | My Site"><meta data-rh="true" name="description" content="This document presents the technical concept for the &quot;DataPlaneFramework Selector&quot;, henceforth &quot;DPF Selector&quot; or &quot;DPFS&quot;"><meta data-rh="true" property="og:description" content="This document presents the technical concept for the &quot;DataPlaneFramework Selector&quot;, henceforth &quot;DPF Selector&quot; or &quot;DPFS&quot;"><link data-rh="true" rel="icon" href="/edc-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://FraunhoferISST.github.io/edc-docs/docs/submodule/Connector/docs/developer/dpf_selector"><link data-rh="true" rel="alternate" href="https://FraunhoferISST.github.io/edc-docs/docs/submodule/Connector/docs/developer/dpf_selector" hreflang="en"><link data-rh="true" rel="alternate" href="https://FraunhoferISST.github.io/edc-docs/docs/submodule/Connector/docs/developer/dpf_selector" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/edc-docs/blog/rss.xml" title="My Site RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/edc-docs/blog/atom.xml" title="My Site Atom Feed"><link rel="stylesheet" href="/edc-docs/assets/css/styles.99c6e2a1.css">
<link rel="preload" href="/edc-docs/assets/js/runtime~main.c2e953c9.js" as="script">
<link rel="preload" href="/edc-docs/assets/js/main.ee9e8729.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/edc-docs/"><div class="navbar__logo"><img src="/edc-docs/img/icon.png" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/edc-docs/img/icon.png" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/edc-docs/docs/">Docs</a><a class="navbar__item navbar__link" docid="README" href="/edc-docs/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/eclipse-edc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://search.maven.org/search?q=g:org.eclipse.edc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Maven Central<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://app.swaggerhub.com/search?owner=eclipse-edc-bot" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">SwaggerHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Technical concept DPF Selector</h1><p>This document presents the technical concept for the &quot;DataPlaneFramework Selector&quot;, henceforth &quot;DPF Selector&quot; or &quot;DPFS&quot;
for short. In typical clustered environments (Kubernetes) we anticipate a multitude of connector runtimes and DPF
runtimes, scaling independently of each other, depending on a particular use case. Also, the DPFs may have different
configurations, so they may not even be in the same replica set (in Azure this would be Availability Sets vs. Scale
Sets).</p><p>Further, we assume that every connector has access to multiple DPF runtimes, even if they are not homogenous replicas.
For example, some deployments may choose to have one dedicated DPF per geographical region, or even per <code>DataSink</code>
/<code>DataSource</code> pair.</p><p>Whenever a data transfer request hits the connector, it eventually will delegate the transfer to the DPF. For that, it
needs to know <em>which DPF to delegate to</em>. In simple deployments, there may just be one single DPF, so the DPF selector
is essentially a preconfigured value, but in more complex scenarios sophisticated algorithms may be employed to select
the best-fitting DPF.</p><p>This is not dissimilar to how load-balancers work, one key difference being that the DPF selector will distribute the
request based on not just the load situation, but also based on request metadata or even functional requirements (e.g. &quot;
must be able to store in Azure BlobStore&quot;).</p><p>Another key difference to (most) load balancers is the modularity and flexibility of the DPF selector: it can be
embedded into another process (e.g. a connector), standalone, it can handle different storage and API technologies, it
itself could theoretically run clustered, etc.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="terminology">Terminology<a class="hash-link" href="#terminology" title="Direct link to heading">â€‹</a></h2><ul><li>DPF: one DataPlaneFramework runtime instance</li><li>CP: one ControlPlane instance, often used synonymous to &quot;connector&quot;</li><li>connector: one connector runtime</li><li>selector: one DPF selector runtime, either embedded or standalone</li><li>DataSource: one particular implementation that the DPF uses to fetch data from (e.g. Amazon S3)</li><li>DataSink: one particular implementation of a data destination (e.g. AzureBlob)</li><li>Seeding: the process of pre-populating a database. Often used synonymous to &quot;loading&quot;.</li><li>Feature pack: a collection of Java modules that fulfill one particular purpose, typically accompanied by a BOM (
bill-of-materials)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="proposed-solution">Proposed solution<a class="hash-link" href="#proposed-solution" title="Direct link to heading">â€‹</a></h2><p>We propose to create another &quot;feature pack&quot; in the EDC repository, essentially a meta module
named <code>:extensions:data-plane-selector</code>, which will contain (at least) the following submodules:</p><ul><li><code>selector-spi</code>: for interfaces and extensibility points such as store, strategy</li><li><code>data-plane-selector-api</code>: REST API</li><li><code>selector-core</code>: common code, default implementations for store and strategies</li></ul><p>Furthermore there should be a <code>selector-launcher</code> in the <code>launchers</code> directory containing a build file for standalone
deployment.</p><p>Centrally to the DPF selector is an interface <code>DataPlaneSelector</code> whos purpose is to select a DPF instance based on an
incoming <code>DataRequest</code> and an optional <code>SelectionStrategy</code>:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public interface DataPlaneSelector {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    default DataPlaneInstance select(DataRequest dataRequest) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return select(dataRequest, new RandomSelectionStrategy());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DataPlaneInstance select(DataRequest dataRequest, SelectionStrategy strategy);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The main business object is the <code>DataPlaneInstance</code> which represents one particular DPF instance with circa the
following signature:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public interface DataPlaneInstance {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    boolean canHandle(DataRequest request);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    URL getUrl(); //returns the url+path to the DataPlane API</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int turnCount(); //how often selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    long lastActive(); //when selected last</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Map&lt;String, Object&gt; getProperties(); //extensible properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Thus, the <code>DataPlaneInstance</code> itself determines whether it can support a particular data request, based on various
capabilities such as its <code>DataSink</code> and <code>DataSource</code> implementations, streaming capabilities, etc.</p><p>Requests come in either through an API or an SPI hit the <code>DataPlaneSelector</code>, which then filters its list
of <code>DataPlaneInstace</code> records and selects the best fitting DPF based on a strategy. By default selection is made at
random.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="apispi-considerations">API/SPI considerations<a class="hash-link" href="#apispi-considerations" title="Direct link to heading">â€‹</a></h3><p>We&#x27;ll provide both a REST API and a Java SPI (i.e. the <code>DataPlaneSelector</code>), so that the DPF selector can run embedded
in another process, or as a standalone runtime. Both of those should offer the same functionality, which is:</p><ul><li><code>get-instance</code>: selects the best-fit DPF for a <code>DataRequest</code>, optionally accepts a <code>SelectionStrategy</code></li><li><code>add-instance</code>: adds a <code>DataPlaneInstance</code> to the internal store</li><li><code>remove-instance</code>: removes a <code>DataPlaneInstance</code> from the internal store</li></ul><p>Both the REST API and the SPI implement these use cases.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="single-vs-multi-dpf">Single vs Multi DPF<a class="hash-link" href="#single-vs-multi-dpf" title="Direct link to heading">â€‹</a></h3><p>In case a particular deployment uses just one DPF, the entire selection process can be simplified to always return the
pre-configured DPF URL. This is likely to be used in end-to-end-test scenarios, demos or samples.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="store-concepts">Store concepts<a class="hash-link" href="#store-concepts" title="Direct link to heading">â€‹</a></h3><p>The DPF selector needs a storage backend where it can save its <code>DataPlaneInstance</code> objects. The default implementation
will be an in-memory one, but extensions can be provided for CosmosDB, SQL, etc.</p><p>Whether a centralized persistent or an ephemeral store should be used will largely depend on the deployment scenario and
whether the DPF selector runs standalone or embedded in the connector.</p><p><strong>Seeding:</strong> As a starting point we will provide a mechanism to load a preconfigured list of DPF instances using the EDC
configuration mechanism. Named properties similar will be used, similar to what we currently have for web contexts, for
example:</p><div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">edc.dpf.selector.pod1.url=http://some.url</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">edc.dpf.selector.pod1.someOtherProperty=...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//...=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">edc.dpf.selector.pod2.url=http://some.other.url</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">edc.dpf.selector.pod2.someOtherProperty=...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In addition, using the aforementioned API, any sort of data seeding scenario is possible, e.g. terraform, a dedicated
loader, scripting, etc.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="selection-strategies">Selection Strategies<a class="hash-link" href="#selection-strategies" title="Direct link to heading">â€‹</a></h3><p>A <code>SelectionStrategy</code> (as in: <a href="https://en.wikipedia.org/wiki/Strategy_pattern" target="_blank" rel="noopener noreferrer">strategy pattern</a>) influences the
best-fit criteria for a <code>DataPlaneInstance</code>. By default, we will implement the following ones:</p><ul><li><code>RandomSelectionStrategy</code>: will select one DPF instance at random. Assuming normal distribution of the RNG, all DPFs
will be selected at approximately equal frequency.</li><li><code>RoundRobinSelectionStrategy</code>: selects the &quot;next&quot; DPF instance in an ordered list. <strong>Requires state!</strong></li><li>[optional]<!-- --> <code>OldestNextSelectionStrategy</code>: selects the DPF instance that was idle the longest</li></ul><p><em>Please note that when multiple DPF selector instances are used, some of the selection strategies only work as intended
if DPF selectors share their storage, otherwise the counters would be inconsitent!</em></p><p>All <code>SelectionStrategy</code> objects must be registered with the DPF selector before it can be passed in through a REST API
or used in the SPI. This requires the use of a <code>SelectionStrategyRegistry</code> into which customer extensions can register
their specific strategies.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="deployment-scenarios">Deployment scenarios<a class="hash-link" href="#deployment-scenarios" title="Direct link to heading">â€‹</a></h2><p>With this modular approach, the DPF selector can run as a standalone application, for example in a Kubernetes Deployment
or as plain sidecar container. However, this type of deployment scenario practically <em>requires</em> adding the <code>-api</code> module
to the build, otherwise no interaction with the selector is possible.</p><p>Another way of running a DPF selector would be as extension, i.e. embedded in an EDC connector runtime. In this scenario
the <code>-api</code> module can be ignored, as all communication happens through the Java SPI. Again, situations with multiple
connector instances practically <em>require</em> using a persistent centralized storage (such as CosmosDB).</p><p><strong>Client lib</strong>: it should be transparent for the connector whether an embedded or a remote DPF selector is used,
therefore we propose creating a small &quot;DPF selector lib&quot; in the EDC codebase, consisting of a single interface:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public interface DataPlaneSelectorClient {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DataPlaneInstance select(DataRequest dataRequest);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// when the DPF selector is embedded --&gt; default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class LocalDataPlaneSelectorClient implements DataPlaneSelectorClient {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final DataPlaneSelector selector;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private SelectionStrategy strategy; //could be null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // CTor(s)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public DataPlaneInstance select(DataRequest dataRequest) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return strategy != null ? selector.select(dataRequest, strategy) : selector.select(dataRequest);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// when the DPF selector is remote</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class RemoteDataPlaneSelectorClient implements DataPlaneSelectorClient {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final EdcHttpClient client;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String strategyName; //could be null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // CTor(s)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public DataPlaneInstance select(DataRequest dataRequest) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //invoke REST API of the remote selector </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="future-developments">Future developments<a class="hash-link" href="#future-developments" title="Direct link to heading">â€‹</a></h2><p>Once we have performance metrics and instrumentation built-in into the DPF, we can create a small extension that reports
those dynamic metrics back to the DPF selector, who then stores them and uses them as additional input parameter to the
selection algorithm.</p><p>Another possible improvement would be a DPF selector that can interact with the Kubernetes backend and dynamically
update its internal storage based on Kubernetes auto-scaling: when Kubernetes scales out the DPF pods, the selector
tracks that and automatically updates its internal storage.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/FraunhoferISST/edc-docs/tree/master/docs/submodule/Connector/docs/developer/dpf_selector.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#terminology" class="table-of-contents__link toc-highlight">Terminology</a></li><li><a href="#proposed-solution" class="table-of-contents__link toc-highlight">Proposed solution</a><ul><li><a href="#apispi-considerations" class="table-of-contents__link toc-highlight">API/SPI considerations</a></li><li><a href="#single-vs-multi-dpf" class="table-of-contents__link toc-highlight">Single vs Multi DPF</a></li><li><a href="#store-concepts" class="table-of-contents__link toc-highlight">Store concepts</a></li><li><a href="#selection-strategies" class="table-of-contents__link toc-highlight">Selection Strategies</a></li></ul></li><li><a href="#deployment-scenarios" class="table-of-contents__link toc-highlight">Deployment scenarios</a></li><li><a href="#future-developments" class="table-of-contents__link toc-highlight">Future developments</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a href="https://projects.eclipse.org/projects/technology.edc/contact" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><span class="footer__link-separator">Â·</span><a href="https://www.youtube.com/channel/UCYmjEHtMSzycheBB4AeITHg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><span class="footer__link-separator">Â·</span><a href="https://projects.eclipse.org/projects/technology.edc" target="_blank" rel="noopener noreferrer" class="footer__link-item">EF Project<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 Eclipse Dataspace Components, built with Docusaurus.</div></div></div></footer></div>
<script src="/edc-docs/assets/js/runtime~main.c2e953c9.js"></script>
<script src="/edc-docs/assets/js/main.ee9e8729.js"></script>
</body>
</html>