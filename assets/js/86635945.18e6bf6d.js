"use strict";(self.webpackChunkedc_docs=self.webpackChunkedc_docs||[]).push([[2037],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=a.createContext({}),s=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=s(e.components);return a.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,c=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=s(n),m=o,h=u["".concat(c,".").concat(m)]||u[m]||d[m]||r;return n?a.createElement(h,l(l({ref:t},p),{},{components:n})):a.createElement(h,l({ref:t},p))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,l=new Array(r);l[0]=u;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:o,l[1]=i;for(var s=2;s<r;s++)l[s]=n[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},335:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>d,frontMatter:()=>r,metadata:()=>i,toc:()=>s});var a=n(7462),o=(n(7294),n(3905));const r={},l="Build your own connector",i={unversionedId:"submodule/Connector/docs/developer/build-your-own-connector",id:"submodule/Connector/docs/developer/build-your-own-connector",title:"Build your own connector",description:"EDC is a set of modules that, wedged together can build up different components to be used to create your dataspace or",source:"@site/docs/submodule/Connector/docs/developer/build-your-own-connector.md",sourceDirName:"submodule/Connector/docs/developer",slug:"/submodule/Connector/docs/developer/build-your-own-connector",permalink:"/edc-docs/docs/submodule/Connector/docs/developer/build-your-own-connector",draft:!1,editUrl:"https://github.com/FraunhoferISST/edc-docs/tree/master/docs/submodule/Connector/docs/developer/build-your-own-connector.md",tags:[],version:"current",frontMatter:{}},c={},s=[{value:"Build and run a monolithic connector",id:"build-and-run-a-monolithic-connector",level:2},{value:"Setting database",id:"setting-database",level:3},{value:"Setting data-plane",id:"setting-data-plane",level:3}],p={toc:s};function d(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"build-your-own-connector"},"Build your own connector"),(0,o.kt)("p",null,"EDC is a set of modules that, wedged together can build up different components to be used to create your dataspace or\nto join to an existent one."),(0,o.kt)("p",null,"This guide will explain how to set up a ",(0,o.kt)("strong",{parentName:"p"},"connector"),", that would be able to communicate with other connectors to\nnegotiate contracts and transfer data."),(0,o.kt)("p",null,"A connector is logically divided in 3 parts:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"control-plane"),(0,o.kt)("li",{parentName:"ul"},"data-plane"),(0,o.kt)("li",{parentName:"ul"},"data-plane-selector")),(0,o.kt)("p",null,"The connector can run as a single deployable composed by the 3 parts or as separated units, the latter will permit\nto scale data-planes independently of control-planes."),(0,o.kt)("h2",{id:"build-and-run-a-monolithic-connector"},"Build and run a monolithic connector"),(0,o.kt)("p",null,"The easiest way to build up a connector is to build all their parts into a single deployment unit.\nTo do this, create a new gradle project with a ",(0,o.kt)("inlineCode",{parentName:"p"},"build.gradle.kts")," file in it:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin"},'plugins {\n    `java-library`\n    id("application")\n    id("com.github.johnrengelman.shadow") version "7.1.2"\n}\n\nrepositories {\n    mavenCentral()\n    maven {\n        url = uri("https://maven.iais.fraunhofer.de/artifactory/eis-ids-public/")\n    }\n}\n\n// pick-up the latest version from https://github.com/eclipse-edc/Connector/releases\nval edcVersion = "<x.x.x>"\n\ndependencies {\n    // the core control-plane module set\n    implementation("org.eclipse.edc:control-plane-core:${edcVersion}")\n\n    // the ids protocol module\n    implementation("org.eclipse.edc:ids:${edcVersion}")\n\n    // a test implementation of the `IdentityService`\n    implementation("org.eclipse.edc:iam-mock:${edcVersion}")\n\n    // management api, will permit to manage the connector through a REST interface\n    implementation("org.eclipse.edc:management-api:${edcVersion}")\n\n    // the core data-plane module set\n    implementation("org.eclipse.edc:data-plane-core:${edcVersion}")\n}\n\n// configure the main class\napplication {\n    mainClass.set("org.eclipse.edc.boot.system.runtime.BaseRuntime")\n}\n\n// build the application as a single jar that will be available in `build/libs/connector.jar`\ntasks.withType<com.github.jengelman.gradle.plugins.shadow.tasks.ShadowJar> {\n    mergeServiceFiles()\n    archiveFileName.set("connector.jar")\n}\n\n')),(0,o.kt)("p",null,"Note that no ",(0,o.kt)("inlineCode",{parentName:"p"},"data-plane-selector")," modules are needed, this because the ",(0,o.kt)("inlineCode",{parentName:"p"},"data-plane")," is built as embedded in the connector."),(0,o.kt)("p",null,"Build:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"./gradlew build\n")),(0,o.kt)("p",null,"Run:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"java -jar build/libs/connector.jar\n")),(0,o.kt)("h3",{id:"setting-database"},"Setting database"),(0,o.kt)("p",null,"The connector you just built stores all the data in memory by default. This is obviously not enough to use the connector\nin an environment that's not your local machine.\nCurrently, there are two different database extensions for the control-plane:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"control-plane-sql"),": Sql database (",(0,o.kt)("a",{parentName:"li",href:"https://www.postgresql.org/"},"postgresql")," is the only dialect currently supported)"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"control-plane-cosmos"),": ",(0,o.kt)("a",{parentName:"li",href:"https://azure.microsoft.com/products/cosmos-db"},"Microsoft CosmosDB")," database")),(0,o.kt)("h3",{id:"setting-data-plane"},"Setting data-plane"),(0,o.kt)("p",null,"To make the ",(0,o.kt)("em",{parentName:"p"},"control-plane")," interact with the ",(0,o.kt)("em",{parentName:"p"},"data-plane"),", it will need at least one of these extensions:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"data-plane-transfer-client"),": provides a client to delegate data transfer to the ",(0,o.kt)("em",{parentName:"li"},"data-plane"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"data-plane-transfer-sync"),": provides services to use the ",(0,o.kt)("em",{parentName:"li"},"data-plane")," as a proxy for querying data from the provider data source.")),(0,o.kt)("p",null,"The ",(0,o.kt)("em",{parentName:"p"},"data-plane")," will need extensions to being able to read/write data from/to different protocols/services, e.g.:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"data-plane-api"),": will make the ",(0,o.kt)("em",{parentName:"li"},"data-plane")," expose APIs that are needed to actually transfer data"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"data-plane-http"),": support HTTP protocol"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"data-plane-azure-storage"),": support ",(0,o.kt)("a",{parentName:"li",href:"https://azure.microsoft.com/products/storage/blobs/"},"Azure Blob Storage")," service"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"data-plane-aws-s3"),": support ",(0,o.kt)("a",{parentName:"li",href:"https://aws.amazon.com/s3/"},"AWS S3")," service"),(0,o.kt)("li",{parentName:"ul"},"other custom provided ",(0,o.kt)("em",{parentName:"li"},"data-plane")," extensions")))}d.isMDXComponent=!0}}]);