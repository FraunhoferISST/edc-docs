<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-submodule/MinimumViableDataspace/docs/developer/decision-records/2022-06-15-registration-service/README">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Registration Service | My Site</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://FraunhoferISST.github.io/edc-docs/docs/submodule/MinimumViableDataspace/docs/developer/decision-records/2022-06-15-registration-service/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Registration Service | My Site"><meta data-rh="true" name="description" content="Registration Service is a component of a Dataspace Authority. In the current version, the Dataspace Authority is centralized to support the Minimum Viable Dataspace (MVD). In future versions, the Authority could also be partly or fully decentralized."><meta data-rh="true" property="og:description" content="Registration Service is a component of a Dataspace Authority. In the current version, the Dataspace Authority is centralized to support the Minimum Viable Dataspace (MVD). In future versions, the Authority could also be partly or fully decentralized."><link data-rh="true" rel="icon" href="/edc-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://FraunhoferISST.github.io/edc-docs/docs/submodule/MinimumViableDataspace/docs/developer/decision-records/2022-06-15-registration-service/"><link data-rh="true" rel="alternate" href="https://FraunhoferISST.github.io/edc-docs/docs/submodule/MinimumViableDataspace/docs/developer/decision-records/2022-06-15-registration-service/" hreflang="en"><link data-rh="true" rel="alternate" href="https://FraunhoferISST.github.io/edc-docs/docs/submodule/MinimumViableDataspace/docs/developer/decision-records/2022-06-15-registration-service/" hreflang="x-default"><link rel="stylesheet" href="/edc-docs/assets/css/styles.5bd81ef5.css">
<link rel="preload" href="/edc-docs/assets/js/runtime~main.bbc09bb1.js" as="script">
<link rel="preload" href="/edc-docs/assets/js/main.bdd0bebb.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/edc-docs/"><div class="navbar__logo"><img src="/edc-docs/img/icon.png" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/edc-docs/img/icon.png" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/edc-docs/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/eclipse-dataspacecomponents/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Registration Service</h1><p>Registration Service is a component of a Dataspace Authority. In the current version, the Dataspace Authority is centralized to support the <a href="https://github.com/eclipse-dataspaceconnector/MinimumViableDataspace" target="_blank" rel="noopener noreferrer">Minimum Viable Dataspace</a> (MVD). In future versions, the Authority could also be partly or fully decentralized.</p><p>Responsibilities of the Dataspace Authority in MVD:</p><ul><li>Establishes a DID (Decentralized Identifier) defining the Dataspace.</li><li>Manages policies defining who is allowed to participate in the dataspace.</li><li>Manages enrollment process of the Dataspace participants.</li><li>Lists the DID of available Dataspace participants.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="deployment">Deployment<a class="hash-link" href="#deployment" title="Direct link to heading">​</a></h2><p>The Registration Service is deployed as a separate component in the Dataspace environment. Deployment workflows and artifacts are provided in the  <a href="https://github.com/eclipse-dataspaceconnector/MinimumViableDataspace" target="_blank" rel="noopener noreferrer">Minimum Viable Dataspace</a> repository.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="identity">Identity<a class="hash-link" href="#identity" title="Direct link to heading">​</a></h2><p>The Registration Service endpoint can be resolved from the <code>did:web</code> document deployed for the Dataspace Authority.</p><p>In future versions, the Registration Service endpoint will be resolved in a Self-Description Document whose URL is available in the the <code>did:web</code> document. This version uses a simplified process omitting the Self-Description Document.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="operations">Operations<a class="hash-link" href="#operations" title="Direct link to heading">​</a></h2><p>Operations supported by the Registration Service:</p><ul><li><a href="#1-dataspace-participant-enrollment">Dataspace participant enrollment</a></li><li><a href="#2-list-participants">Listing all Dataspace participants</a></li></ul><p>Operations that will be supported in future versions of the Registration Service:</p><ul><li>Dataspace participant offboarding</li><li>Blacklisting</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-dataspace-participant-enrollment">1. Dataspace participant enrollment<a class="hash-link" href="#1-dataspace-participant-enrollment" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="participants">Participants<a class="hash-link" href="#participants" title="Direct link to heading">​</a></h4><ol><li><em>Company1</em>, an entity which intends to become a Dataspace participant</li><li><em>The Dataspace Authority</em>, which manages the enrollment process</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a class="hash-link" href="#overview" title="Direct link to heading">​</a></h4><p>A Client for <em>Company1</em> initiates the enrollment process by resolving and contacting the enrollment API endpoint for the <em>Dataspace Authority</em>. (The client could be e.g. a CLI utility.)</p><p><em>The Dataspace Authority</em> enrollment service obtains Verifiable Credentials (VCs) from <em>Company1</em> to determine whether it meets enrollment policies. The enrollment service then issues a Verifiable Credential that establishes membership and pushes it to <em>Company 1&#x27;s</em> Identity Hub, and stores membership and certificate information.</p><p>In simple scenarios, enrollment could be fast and fully automated. However, in advanced scenarios, enrollment policies could require interactions with external systems, and even manual processes, therefore, it is implemented asynchronously.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="pre-conditions">Pre-conditions<a class="hash-link" href="#pre-conditions" title="Direct link to heading">​</a></h4><ol><li><em>Company1</em> has deployed an Identity Hub service, and a DID Document containing the Identity Hub URL.</li><li><em>Company1</em> knows the DID URL of the Dataspace it intends to join.</li><li>The <em>Company1</em> Identity Hub contains VCs that satisfy <em>the Dataspace Authority</em> enrollment policy. In MVD, a credential <code>{&quot;gaiaXMember&quot;: &quot;true&quot;}</code> is seeded for each deployed participant, signed by a fake GAIA-X authority.</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="post-conditions">Post-conditions<a class="hash-link" href="#post-conditions" title="Direct link to heading">​</a></h4><ol><li>The <em>Company1</em> Identity Hub contains a VC signed by <em>the Dataspace Authority</em>, that establishes membership in <em>Dataspace D</em>. This is used by other participants to authorize requests from <em>Company1</em>.</li><li>The <em>Company1</em> DID URL is stored in the Registration Service Participants Store. This is used to serve participant requests.</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="flow-sequence">Flow sequence<a class="hash-link" href="#flow-sequence" title="Direct link to heading">​</a></h4><p><img loading="lazy" alt="dataspace-enrollment" src="/edc-docs/assets/images/dataspace-enrollment-f41bdaf43d51cbbdb21cea2c66a66349.png" width="1102" height="632" class="img_ev3q"></p><ol><li>The Client for <em>Company1</em> initiates the enrollment process based on the Dataspace DID URL. It retrieves the DID Document, and parses it to retrieve Dataspace
enrollment HTTP endpoint.</li><li>The client needs access to the <em>Company1</em> Private Key to sign a JWS. The client sends an HTTP request to <em>the Dataspace Authority</em> enrollment endpoint. The
request is accepted for asynchronous processing.</li><li>The Registration Service uses the <a href="/edc-docs/docs/submodule/MinimumViableDataspace/docs/developer/decision-records/2022-06-16-distributed-authorization/">Distributed authorization sub-flow</a> to authenticate the
request...</li><li>... and retrieves credentials from <em>Company1&#x27;s</em> Identity Hub.</li><li>The Registration Service stores participant information in its store. This includes Company 1&#x27;s DID URL.</li><li>The Registration Service authorizes the request by applying the Dataspace enrollment policy on the obtained Verifiable Credentials. In MVD, the service checks for a credential <code>{&quot;gaiaXMember&quot;: &quot;true&quot;}</code> signed by any issuer (as the EDC policy engine does not currently allow restricting trusting claims to specific issuers).</li><li>The Registration Service updates the status of the participant&#x27;s membership indicating that the participant&#x27;s onboarding is successful/failed.</li><li>The Registration Service issues and signs a membership Verifiable Credential.</li><li>The Registration Service sends the Verifiable Credential to <em>Company1&#x27;s</em> Identity Hub for storage. It uses the Identity Hub bearer token (from the Distributed authorization
sub-flow) to authenticate the request.</li><li><em>Company1&#x27;s</em> Identity Hub validates the bearer token and stores the membership Verifiable Credential.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-list-participants">2. List participants<a class="hash-link" href="#2-list-participants" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="participants-1">Participants<a class="hash-link" href="#participants-1" title="Direct link to heading">​</a></h4><ol><li><em>Company1</em>, a Dataspace Participant with a Dataspace Connector (e.g. EDC application) that wants to discover IDS endpoints (e.g. in order to list contract offers)</li><li><em>The Dataspace Authority</em>, which manages Dataspace memberships</li><li><em>Company2</em>, <em>Company3</em>, etc., Dataspace Participants</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="overview-1">Overview<a class="hash-link" href="#overview-1" title="Direct link to heading">​</a></h4><p>A typical EDC deployment caches contract offers from other participants in a federated catalog, so that users can quickly browse and negotiate contracts. To regularly retrieve offers, it regularly contacts the Registration Service to refresh its list of Dataspace Participants, then obtains contract offers from each participants to refresh its cache.</p><p>In this flow, the EDC for <em>Company1</em> obtains a list of Dataspace Participants and resolves their IDS endpoints.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="pre-conditions-1">Pre-conditions<a class="hash-link" href="#pre-conditions-1" title="Direct link to heading">​</a></h4><p>Participants are registered as (currently valid) Dataspace Participants</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="flow-sequence-1">Flow sequence<a class="hash-link" href="#flow-sequence-1" title="Direct link to heading">​</a></h4><p><img loading="lazy" alt="list-participants" src="/edc-docs/assets/images/list-participants-96644d9980ec2c0a31e48ffed449bb79.png" width="988" height="520" class="img_ev3q"></p><ol><li>The EDC for <em>Company1</em> determines the Registration Service endpoint from the Dataspace DID Document.</li><li>The EDC for <em>Company1</em> issues a request to the Registration Service, to list participants.</li><li>The Registration Service uses the <a href="/edc-docs/docs/submodule/MinimumViableDataspace/docs/developer/decision-records/2022-06-16-distributed-authorization/">Distributed authorization sub-flow</a> to authenticate the
request...</li><li>... and retrieves Verifiable Presentations from <em>Company1&#x27;s</em> Identity Hub.</li><li>The Registration Service authorizes the request by applying the access policy on the obtained Verifiable Presentations. For example, the caller must be a valid
Dataspace Participant.</li><li>The Registration Service obtains the list of Dataspace Participant DID URIs from its storage...</li><li>... and returns it synchronously to the caller (<em>Company1</em> EDC).</li><li>The EDC for <em>Company1</em> iterates through the Participants&#x27; DID URIs, and retrieves the collection of their IDS endpoints from their DID Documents.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a class="hash-link" href="#references" title="Direct link to heading">​</a></h2><ul><li><a href="https://github.com/eclipse-dataspaceconnector/IdentityHub/blob/main/docs/developer/decision-records/2022-06-08-identity-hub/README.md" target="_blank" rel="noopener noreferrer">Identity Hub in MVD</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/FraunhoferISST/edc-docs/tree/master/docs/submodule/MinimumViableDataspace/docs/developer/decision-records/2022-06-15-registration-service/README.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#deployment" class="table-of-contents__link toc-highlight">Deployment</a></li><li><a href="#identity" class="table-of-contents__link toc-highlight">Identity</a></li><li><a href="#operations" class="table-of-contents__link toc-highlight">Operations</a><ul><li><a href="#1-dataspace-participant-enrollment" class="table-of-contents__link toc-highlight">1. Dataspace participant enrollment</a></li><li><a href="#2-list-participants" class="table-of-contents__link toc-highlight">2. List participants</a></li></ul></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 My Project,  built with Fraunhofer ISST.</div></div></div></footer></div>
<script src="/edc-docs/assets/js/runtime~main.bbc09bb1.js"></script>
<script src="/edc-docs/assets/js/main.bdd0bebb.js"></script>
</body>
</html>