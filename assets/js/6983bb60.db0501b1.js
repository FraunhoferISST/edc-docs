"use strict";(self.webpackChunkedc_docs=self.webpackChunkedc_docs||[]).push([[4599],{3905:(e,t,o)=>{o.d(t,{Zo:()=>p,kt:()=>y});var r=o(7294);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function c(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function a(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,r,n=function(e,t){if(null==e)return{};var o,r,n={},c=Object.keys(e);for(r=0;r<c.length;r++)o=c[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)o=c[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var d=r.createContext({}),i=function(e){var t=r.useContext(d),o=t;return e&&(o="function"==typeof e?e(t):a(a({},t),e)),o},p=function(e){var t=i(e.components);return r.createElement(d.Provider,{value:t},e.children)},l={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var o=e.components,n=e.mdxType,c=e.originalType,d=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=i(o),y=n,f=u["".concat(d,".").concat(y)]||u[y]||l[y]||c;return o?r.createElement(f,a(a({ref:t},p),{},{components:o})):r.createElement(f,a({ref:t},p))}));function y(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var c=o.length,a=new Array(c);a[0]=u;var s={};for(var d in t)hasOwnProperty.call(t,d)&&(s[d]=t[d]);s.originalType=e,s.mdxType="string"==typeof e?e:n,a[1]=s;for(var i=2;i<c;i++)a[i]=o[i];return r.createElement.apply(null,a)}return r.createElement.apply(null,o)}u.displayName="MDXCreateElement"},7541:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>l,frontMatter:()=>c,metadata:()=>s,toc:()=>i});var r=o(7462),n=(o(7294),o(3905));const c={},a="JaCoCo with Codacy",s={unversionedId:"submodule/Connector/docs/developer/decision-records/2022-02-10-code-coverage/codacy",id:"submodule/Connector/docs/developer/decision-records/2022-02-10-code-coverage/codacy",title:"JaCoCo with Codacy",description:"Codacy is an online service for both static code analysis and test code coverage analysis. It is free for Open Source projects.",source:"@site/docs/submodule/Connector/docs/developer/decision-records/2022-02-10-code-coverage/codacy.md",sourceDirName:"submodule/Connector/docs/developer/decision-records/2022-02-10-code-coverage",slug:"/submodule/Connector/docs/developer/decision-records/2022-02-10-code-coverage/codacy",permalink:"/edc-docs/docs/submodule/Connector/docs/developer/decision-records/2022-02-10-code-coverage/codacy",draft:!1,editUrl:"https://github.com/FraunhoferISST/edc-docs/tree/master/docs/submodule/Connector/docs/developer/decision-records/2022-02-10-code-coverage/codacy.md",tags:[],version:"current",frontMatter:{}},d={},i=[],p={toc:i};function l(e){let{components:t,...c}=e;return(0,n.kt)("wrapper",(0,r.Z)({},p,c,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"jacoco-with-codacy"},"JaCoCo with Codacy"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://www.codacy.com/"},"Codacy")," is an online service for both static code analysis and test code coverage analysis. It is free for Open Source projects."),(0,n.kt)("p",null,"We ",(0,n.kt)("a",{parentName:"p",href:"https://docs.codacy.com/getting-started/codacy-quickstart/"},"enrolled our repository fork")," into Codacy using its Web UI, and obtained a ",(0,n.kt)("a",{parentName:"p",href:"https://docs.codacy.com/codacy-api/api-tokens/"},"Project API token")," which we set up as a GitHub secret."),(0,n.kt)("p",null,"We used the modified ",(0,n.kt)("inlineCode",{parentName:"p"},"build.gradle.kts")," file as above to create JaCoCo XML reports. We then used the ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/codacy/codacy-coverage-reporter-action"},"Codacy GitHub action")," to upload our reports. The ",(0,n.kt)("inlineCode",{parentName:"p"},"find ")," command is set up to exclude one XML report with empty content that is 240 bytes long, and causes the following action to fail."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-yaml"},"       - name: Set Coverage Report Paths\n         id: coverage-paths\n         run: |\n           echo -n \"::set-output name=COVERAGE_REPORT_PATHS::\"\n           find . -name jacocoTestReport.xml -size +300c -printf '%p,'\n           \n       - name: Publish Code Coverage Results\n         uses: codacy/codacy-coverage-reporter-action@v1\n         with:\n           project-token: ${{ secrets.CODACY_PROJECT_TOKEN }}\n           coverage-reports: ${{ steps.coverage-paths.outputs.COVERAGE_REPORT_PATHS }}\n")),(0,n.kt)("p",null,"At first the reports weren't visible in the ",(0,n.kt)("a",{parentName:"p",href:"https://app.codacy.com/gh/Agera-CatenaX/EclipseDataSpaceConnector/settings/coverage"},"Codacy UI"),", but they\nstarted to appear after ~16 hours."),(0,n.kt)("p",null,"In the meantime we also reached out to Codacy support to investigate the issue."),(0,n.kt)("p",null,"Below screenshot shows code coverage diagram of the main branch analysis.\n",(0,n.kt)("img",{alt:"Code Coverage with Codacy",src:o(2483).Z,width:"1472",height:"962"})),(0,n.kt)("p",null,"We didn't manage to set up Codacy to see the code coverage reports for the PRs neither in the Codacy dashboard nor in Github Actions.\nCodacy seems to offer more features for code quality analysis than for code coverage scans."))}l.isMDXComponent=!0},2483:(e,t,o)=>{o.d(t,{Z:()=>r});const r=o.p+"assets/images/code-coverage-codacy-95268c37dda862f0517f3a94d7078de9.png"}}]);